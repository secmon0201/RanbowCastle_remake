/*:
 * @target MZ
 * @plugindesc [补丁] 战斗中不显示MP伤害/恢复数字
 * @author Gemini
 *
 * @help
 * ============================================================================
 * 功能介绍
 * ============================================================================
 * 这个插件主要用于配合 SuperFrontView (或其他战斗插件) 使用。
 *
 * 它的作用是：
 * 屏蔽战斗中 MP 变化时跳出的数字（通常是蓝色字），
 * 但保留 HP 伤害数字、治疗数字以及 MISS/回避 等提示。
 *
 * ============================================================================
 * 使用方法
 * ============================================================================
 * 1. 将此插件放入 js/plugins 目录。
 * 2. 在插件管理器中开启。
 * 3. 建议放在所有战斗 UI 类插件的下方，以确保补丁生效。
 *
 * ============================================================================
 */

(() => {
    // 拦截伤害数字的初始化过程
    const _Sprite_Damage_setup = Sprite_Damage.prototype.setup;
    
    Sprite_Damage.prototype.setup = function(target) {
        const result = target.result();
        
        // --- 核心逻辑 ---
        // 备份真实的 MP 伤害值
        const originalMpDamage = result.mpDamage;
        
        // 欺骗绘制层：暂时将 MP 伤害设为 0
        // 这样 Sprite_Damage 就会认为 MP 没有变化，从而跳过绘制 MP 数字
        result.mpDamage = 0;
        
        // 调用系统原本的绘制逻辑 (此时它只看得到 HP 变化)
        _Sprite_Damage_setup.call(this, target);
        
        // --- 还原逻辑 ---
        // 绘制指令发出后，立即把 MP 伤害值还原
        // 确保不会影响后续的数据统计或其他插件的逻辑
        result.mpDamage = originalMpDamage;
    };
})();